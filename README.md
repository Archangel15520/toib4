# Практическое задание "Контроль целостности"
## Подготовленная виртуальная машина с Astra linux
Для выполнения данного задания был скачан образ Astra Linux и установлена версия системы "Смоленск" с максимальным уровнем защиты<br /><br />
![Снимок1](https://github.com/Archangel15520/toib4/blob/main/Screenshot/1.JPG)

## Настройка и проверка мандатного контроля целостности
Для измнения конфигурации МКЦ в ОС Astra Linux необходимо воспользоваться утилитой Управление политикой безопасности<br /><br />
![Снимок2](https://github.com/Archangel15520/toib4/blob/main/Screenshot/2.JPG)

В меню Режим эксперта можно непосредственно назначить уровни целостности для директорий. В качестве проверки правила NWU я обозначил 2 тестовые директории с такими правами:<br /><br />
![Снимок3](https://github.com/Archangel15520/toib4/blob/main/Screenshot/5.JPG)
![Снимок4](https://github.com/Archangel15520/toib4/blob/main/Screenshot/6.JPG)

Для проверки мандатного контроля необходимо зайти в учетную запись с атрибутом целостности уровня "Низкий".<br />
Ниже представлен пример взаимодействия по записи между обеими папками<br /><br />
![Снимок5](https://github.com/Archangel15520/toib4/blob/main/Screenshot/7.JPG)

Здесь можно увидеть, что копирование файла с атрибутом ниже в папку с атрибутом выше не сработало - была получена ошибка доступа. В то же время "запись вниз" работает.
## Работа с режимом замкнутой программной среды
Для проверки работы режима ЗПС в Управлении политикой безопасности необходимо включить данные настройки:<br /><br />
![Снимок6](https://github.com/Archangel15520/toib4/blob/main/Screenshot/8.JPG)

В качестве тестового файла был взят скрипт инициализации Discord. Результат выполнения на скриншоте:<br /><br /> 
![Снимок7](https://github.com/Archangel15520/toib4/blob/main/Screenshot/9.JPG)
![Снимок8](https://github.com/Archangel15520/toib4/blob/main/Screenshot/10.JPG)

## Работа с утилитами контроля целостности и регламентного контроля целостности
### Использование `gostsum`
Утилита `gostsum` вычисляет хэш-сумму файлов в соответствии с ГОСТ Р 34.11-2012. Пример использования с .deb пакетом:<br /><br />
![Снимок9](https://github.com/Archangel15520/toib4/blob/main/Screenshot/11.JPG)

### Использование `afick`
`afick` - утилита, предназначенная для контроля целостности файловой системы ОС. Для корректной работы утилиты сначала создается БД утилиты:<br /><br />
![Снимок10](https://github.com/Archangel15520/toib4/blob/main/Screenshot/12.JPG)


Далее изменим часть системных файлов для получения ответа от утилиты, перед этим сделав бэкап:<br /><br />
![Снимок11](https://github.com/Archangel15520/toib4/blob/main/Screenshot/13.JPG)

Получаем результат от утилиты:<br /><br />
![Снимок12](https://github.com/Archangel15520/toib4/blob/main/Screenshot/14.JPG)
